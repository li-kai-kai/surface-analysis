# XYZ文件分析工具 - 打包说明

## 📦 打包步骤

### 1. 安装打包依赖
```bash
pip3 install pyinstaller
```

### 2. 执行打包命令
```bash
pyinstaller xyz_analyzer.spec
```

### 3. 查找生成的EXE
打包完成后,可执行文件位于:
```
dist/XYZ分析工具.exe  (Windows)
dist/XYZ分析工具      (macOS)
```

## 🚀 使用方法

### 开发环境测试
```bash
python3 launcher.py
```

### 打包后使用
1. 双击 `XYZ分析工具.exe`
2. 等待2秒,浏览器会自动打开
3. 在界面中上传XYZ文件并分析

## 📋 文件说明

- `launcher.py` - 启动脚本,自动打开浏览器
- `app.py` - Streamlit主应用
- `process_xyz.py` - 核心分析逻辑
- `xyz_analyzer.spec` - PyInstaller配置文件
- `requirements.txt` - Python依赖列表

## ⚠️ 注意事项

### macOS 打包注意事项
1. **当前系统**: macOS打包会生成macOS可执行文件
2. **跨平台打包**: 如需生成Windows的exe,需要在Windows系统上打包
3. **替代方案**: 
   - 使用Windows虚拟机打包
   - 使用CI/CD服务(如GitHub Actions)
   - 使用Wine + PyInstaller (不推荐,可能有兼容性问题)

### Windows 打包步骤
如果你需要Windows版本,在Windows系统上执行:
```bash
# 1. 安装依赖
pip install -r requirements.txt
pip install pyinstaller

# 2. 打包
pyinstaller xyz_analyzer.spec

# 3. 测试
dist\XYZ分析工具.exe
```

## 🔧 自定义配置

### 修改端口
编辑 `launcher.py` 第32行:
```python
"--server.port=8501",  # 改为其他端口
```

### 添加应用图标
1. 准备 `.ico` 文件(Windows)或 `.icns` 文件(macOS)
2. 编辑 `xyz_analyzer.spec` 最后一行:
```python
icon='your_icon.ico',  # 替换为你的图标路径
```

### 减小文件大小
在 `xyz_analyzer.spec` 中添加排除项:
```python
excludes=['tkinter', 'test', 'unittest'],
```

## 📊 预期文件大小

- **未压缩**: 约 200-300 MB
- **UPX压缩后**: 约 100-150 MB

## 🐛 常见问题

### 问题1: 打包后运行报错 "No module named 'streamlit'"
**解决**: 检查 `xyz_analyzer.spec` 中的 `hiddenimports` 是否包含所有依赖

### 问题2: 浏览器没有自动打开
**解决**: 手动打开浏览器访问 `http://localhost:8501`

### 问题3: 打包文件太大
**解决**: 
- 使用虚拟环境,只安装必要的包
- 启用UPX压缩
- 排除不需要的模块

## 📞 技术支持

如有问题,请检查:
1. Python版本 (建议 3.8-3.11)
2. 依赖包版本是否匹配
3. PyInstaller版本 (建议 5.0+)
